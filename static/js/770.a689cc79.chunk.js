"use strict";(self.webpackChunkcar_rental_service=self.webpackChunkcar_rental_service||[]).push([[770],{8770:function(e,t,r){r.r(t),r.d(t,{default:function(){return b}});var n=r(4165),a=r(3433),s=r(5861),c=r(9439),i=r(2227),u=r(2791),l=r(1243);l.Z.defaults.baseURL="https://645a8c7c65bd868e931e4c89.mockapi.io";var o=function(){var e=(0,s.Z)((0,n.Z)().mark((function e(t){var r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.Z.get("/cars",{signal:t.signal});case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=o,p=r(458),d=r(411),Z=r(1751),g=r(117),h=r(5802),x=r(3500),m=r(4501),v=r(5218),j=r(9230),k=r(184),b=function(){var e=(0,j.$G)().t,t=(0,u.useState)([]),r=(0,c.Z)(t,2),o=r[0],b=r[1],S=(0,u.useState)([]),y=(0,c.Z)(S,2),F=y[0],P=y[1],w=(0,u.useState)(1),C=(0,c.Z)(w,2),I=C[0],D=C[1],_=(0,u.useState)(8),M=(0,c.Z)(_,1)[0],A=(0,u.useState)(!1),E=(0,c.Z)(A,2),N=E[0],R=E[1],z=(0,u.useState)([]),G=(0,c.Z)(z,2),H=G[0],K=G[1],L=(0,u.useState)(!1),U=(0,c.Z)(L,2),$=U[0],q=U[1],B=(0,u.useState)(""),J=(0,c.Z)(B,2),O=J[0],Q=J[1],T=(0,u.useState)(""),V=(0,c.Z)(T,2),W=V[0],X=V[1],Y=(0,u.useState)(!1),ee=(0,c.Z)(Y,2),te=ee[0],re=ee[1],ne=(0,u.useState)({min:"",max:""}),ae=(0,c.Z)(ne,2),se=ae[0],ce=ae[1],ie=(0,u.useState)("ascending"),ue=(0,c.Z)(ie,2),le=ue[0],oe=ue[1];(0,u.useEffect)((function(){var e=new AbortController,t=function(){var t=(0,s.Z)((0,n.Z)().mark((function t(){var r,s;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,R(!0),t.next=4,f(e);case 4:r=t.sent,b(r),s=(0,a.Z)(new Set(r.map((function(e){return e.make})))),P(s),K(r),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),l.Z.isCancel(t.t0)?console.log("\u0417\u0430\u043f\u0438\u0442 \u0431\u0443\u043b\u043e \u0441\u043a\u0430\u0441\u043e\u0432\u0430\u043d\u043e",t.t0.message):console.error("\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u043f\u0440\u0438 \u0432\u0438\u043a\u043e\u043d\u0430\u043d\u043d\u0456 \u0437\u0430\u043f\u0438\u0442\u0443",t.t0);case 14:return t.prev=14,R(!1),t.finish(14);case 17:case"end":return t.stop()}}),t,null,[[0,11,14,17]])})));return function(){return t.apply(this,arguments)}}();return t(),function(){e.abort()}}),[]);var fe=I*M,pe=(0,u.useCallback)((function(e){if(""!==O&&e.make!==O)return!1;var t=parseInt(e.rentalPrice.replace(/\D/g,""),10);return!(""!==W&&t>parseInt(W,10))&&!(""!==se.min&&e.mileage<se.min||""!==se.max&&e.mileage>se.max)}),[O,W,se]);(0,u.useEffect)((function(){if($){var e=o.filter(pe);K(e),0===e.length?(re(!0),v.ZP.error("No cars match your criteria. Please adjust your filters.")):re(!1),q(!1)}}),[$,o,pe]);var de=(0,a.Z)(H).sort((function(e,t){return"ascending"===le?parseInt(e.rentalPrice.replace(/\D/g,""),10)-parseInt(t.rentalPrice.replace(/\D/g,""),10):parseInt(t.rentalPrice.replace(/\D/g,""),10)-parseInt(e.rentalPrice.replace(/\D/g,""),10)})).slice(0,fe);return(0,k.jsxs)("section",{children:[N&&(0,k.jsx)(Z.Z,{}),(0,k.jsx)(v.x7,{}),(0,k.jsx)(g.Z,{makeFilter:O,priceFilter:W,mileageFilter:se,setMakeFilter:Q,setPriceFilter:X,setMileageFilter:ce,makes:F,handleReset:function(){Q(""),X(""),ce({min:"",max:""}),q(!0),re(!1)},onApplyFilters:function(){q(!0)},children:(0,k.jsx)(p.Kz,{type:"button","aria-label":"sorting-button",onClick:function(){oe((function(e){return"ascending"===e?"descending":"ascending"}))},children:"ascending"===le?(0,k.jsx)(h.r,{}):(0,k.jsx)(x.r,{})})}),(0,k.jsxs)(d.Z,{children:[0===de.length&&te&&(0,k.jsx)(k.Fragment,{children:(0,k.jsx)(m.x,{children:"No cars match your criteria. Please adjust your filters."})}),(0,k.jsx)(p.Hg,{children:de.map((function(e){return(0,k.jsx)("li",{children:(0,k.jsx)(i.Z,{car:e})},e.id)}))}),H.length>fe&&(0,k.jsx)(p.CF,{type:"button",onClick:function(){return D((function(e){return e+1}))},children:e("loadMore")})]})]})}}}]);
//# sourceMappingURL=770.a689cc79.chunk.js.map