{"version":3,"file":"static/js/770.2c0860eb.chunk.js","mappings":"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","sources":["services/carsApi.js","pages/CatalogPage/CatalogPage.jsx"],"sourcesContent":["import axios from 'axios';\naxios.defaults.baseURL = 'https://645a8c7c65bd868e931e4c89.mockapi.io';\n\nconst fetchCars = async controller => {\n  const response = await axios.get('/cars', {\n    signal: controller.signal,\n  });\n  return response.data;\n};\n\nexport default fetchCars;\n","import CarCard from 'components/CarCard/CarCard';\nimport { useEffect, useState, useCallback } from 'react';\nimport axios from 'axios';\nimport fetchCars from 'services/carsApi';\nimport { CarsList, LoadMoreBtn, SortButton } from './CatalogPage.styled';\nimport { Container } from 'components/SharedLayout/SharedLayout.styled';\nimport FallBackLoader from '../../components/FallBackLoader/FallBackLoader';\nimport Filter from 'components/Filter/Filter';\nimport { ReactComponent as DescendingIcon } from '../../images/icons/sort-amount-desc.svg';\nimport { ReactComponent as AscendingIcon } from '../../images/icons/sort-amount-asc.svg';\nimport { Text } from 'pages/FavoritesPage/FavoritesPage.styled';\n\nimport toast, { Toaster } from 'react-hot-toast';\n\nconst CatalogPage = () => {\n  const [cars, setCars] = useState([]);\n  const [makes, setMakes] = useState([]);\n  const [currentPage, setCurrentPage] = useState(1);\n  const [carsPerPage] = useState(8);\n  const [isLoading, setIsLoading] = useState(false);\n\n  const [filteredCars, setFilteredCars] = useState([]);\n  const [applyFiltersFlag, setApplyFiltersFlag] = useState(false);\n\n  const [makeFilter, setMakeFilter] = useState('');\n  const [priceFilter, setPriceFilter] = useState('');\n\n  const [showNoCarsMessage, setShowNoCarsMessage] = useState(false);\n\n  const [mileageFilter, setMileageFilter] = useState({\n    min: '',\n    max: '',\n  });\n\n  const [sortOrder, setSortOrder] = useState('ascending');\n\n  useEffect(() => {\n    const controller = new AbortController();\n    const getAllCars = async () => {\n      try {\n        setIsLoading(true);\n        const result = await fetchCars(controller);\n        setCars(result);\n        const uniqueMakes = [...new Set(result.map(car => car.make))];\n        setMakes(uniqueMakes);\n        setFilteredCars(result);\n      } catch (error) {\n        if (axios.isCancel(error)) {\n          console.log('Запит було скасовано', error.message);\n        } else {\n          console.error('Помилка при виконанні запиту', error);\n        }\n      } finally {\n        setIsLoading(false);\n      }\n    };\n\n    getAllCars();\n\n    return () => {\n      controller.abort();\n    };\n  }, []);\n\n  const indexOfLastCar = currentPage * carsPerPage;\n  const filterCars = useCallback(\n    car => {\n      if (makeFilter !== '' && car.make !== makeFilter) {\n        return false;\n      }\n\n      const rentalPriceNumeric = parseInt(\n        car.rentalPrice.replace(/\\D/g, ''),\n        10\n      );\n\n      if (\n        priceFilter !== '' &&\n        rentalPriceNumeric > parseInt(priceFilter, 10)\n      ) {\n        return false;\n      }\n\n      if (\n        (mileageFilter.min !== '' && car.mileage < mileageFilter.min) ||\n        (mileageFilter.max !== '' && car.mileage > mileageFilter.max)\n      ) {\n        return false;\n      }\n\n      return true;\n    },\n    [makeFilter, priceFilter, mileageFilter]\n  );\n\n  useEffect(() => {\n    if (applyFiltersFlag) {\n      const filteredCars = cars.filter(filterCars);\n      setFilteredCars(filteredCars);\n      if (filteredCars.length === 0) {\n        setShowNoCarsMessage(true);\n        toast.error('No cars match your criteria. Please adjust your filters.');\n      } else {\n        setShowNoCarsMessage(false);\n      }\n\n      setApplyFiltersFlag(false);\n    }\n  }, [applyFiltersFlag, cars, filterCars]);\n\n  const sortedCars = [...filteredCars].sort((a, b) => {\n    if (sortOrder === 'ascending') {\n      return (\n        parseInt(a.rentalPrice.replace(/\\D/g, ''), 10) -\n        parseInt(b.rentalPrice.replace(/\\D/g, ''), 10)\n      );\n    } else {\n      return (\n        parseInt(b.rentalPrice.replace(/\\D/g, ''), 10) -\n        parseInt(a.rentalPrice.replace(/\\D/g, ''), 10)\n      );\n    }\n  });\n\n  const currentCars = sortedCars.slice(0, indexOfLastCar);\n\n  const handleLoadMore = () => setCurrentPage(prevPage => prevPage + 1);\n\n  const handleReset = () => {\n    setMakeFilter('');\n    setPriceFilter('');\n    setMileageFilter({ min: '', max: '' });\n    setApplyFiltersFlag(true);\n    setShowNoCarsMessage(false);\n  };\n\n  const toggleSortOrder = () => {\n    setSortOrder(prevSortOrder =>\n      prevSortOrder === 'ascending' ? 'descending' : 'ascending'\n    );\n  };\n\n  return (\n    <section>\n      {isLoading && <FallBackLoader />}\n      <Toaster />\n      <Container>\n        <Filter\n          makeFilter={makeFilter}\n          priceFilter={priceFilter}\n          mileageFilter={mileageFilter}\n          setMakeFilter={setMakeFilter}\n          setPriceFilter={setPriceFilter}\n          setMileageFilter={setMileageFilter}\n          makes={makes}\n          handleReset={handleReset}\n          onApplyFilters={() => {\n            setApplyFiltersFlag(true);\n          }}\n        >\n          <SortButton\n            type=\"button\"\n            aria-label=\"sorting-button\"\n            onClick={toggleSortOrder}\n          >\n            {sortOrder === 'ascending' ? <DescendingIcon /> : <AscendingIcon />}\n          </SortButton>\n        </Filter>\n        {currentCars.length === 0 && showNoCarsMessage && (\n          <>\n            <Text>\n              No cars match your criteria. Please adjust your filters.\n            </Text>\n          </>\n        )}\n        <CarsList>\n          {currentCars.map(car => (\n            <li key={car.id}>{<CarCard car={car} />}</li>\n          ))}\n        </CarsList>\n        {filteredCars.length > indexOfLastCar && (\n          <LoadMoreBtn type=\"button\" onClick={handleLoadMore}>\n            Load more\n          </LoadMoreBtn>\n        )}\n      </Container>\n    </section>\n  );\n};\n\nexport default CatalogPage;\n"],"names":["axios","defaults","baseURL","fetchCars","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","controller","response","wrap","_context","prev","next","get","signal","sent","abrupt","data","stop","_x","apply","arguments","_useState","useState","_useState2","_slicedToArray","cars","setCars","_useState3","_useState4","makes","setMakes","_useState5","_useState6","currentPage","setCurrentPage","_useState7","carsPerPage","_useState9","_useState10","isLoading","setIsLoading","_useState11","_useState12","filteredCars","setFilteredCars","_useState13","_useState14","applyFiltersFlag","setApplyFiltersFlag","_useState15","_useState16","makeFilter","setMakeFilter","_useState17","_useState18","priceFilter","setPriceFilter","_useState19","_useState20","showNoCarsMessage","setShowNoCarsMessage","_useState21","min","max","_useState22","mileageFilter","setMileageFilter","_useState23","_useState24","sortOrder","setSortOrder","useEffect","AbortController","getAllCars","result","uniqueMakes","_toConsumableArray","Set","map","car","make","t0","isCancel","console","log","message","error","finish","abort","indexOfLastCar","filterCars","useCallback","rentalPriceNumeric","parseInt","rentalPrice","replace","mileage","filter","length","toast","currentCars","sort","a","b","slice","_jsxs","children","_jsx","FallBackLoader","Toaster","Container","Filter","handleReset","onApplyFilters","SortButton","type","onClick","prevSortOrder","DescendingIcon","AscendingIcon","_Fragment","Text","CarsList","CarCard","id","LoadMoreBtn","prevPage"],"sourceRoot":""}