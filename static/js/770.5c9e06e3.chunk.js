"use strict";(self.webpackChunkcar_rental_service=self.webpackChunkcar_rental_service||[]).push([[770],{8770:function(e,t,n){n.r(t),n.d(t,{default:function(){return v}});var r=n(4165),a=n(3433),c=n(5861),s=n(9439),i=n(2227),u=n(2791),l=n(1243);l.Z.defaults.baseURL="https://645a8c7c65bd868e931e4c89.mockapi.io";var o=function(){var e=(0,c.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.Z.get("/cars",{signal:t.signal});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=o,p=n(458),Z=n(2906),d=n(1751),g=n(117),m=n(5802),x=n(3500),h=n(184),v=function(){var e=(0,u.useState)([]),t=(0,s.Z)(e,2),n=t[0],o=t[1],v=(0,u.useState)([]),k=(0,s.Z)(v,2),b=k[0],S=k[1],j=(0,u.useState)(1),w=(0,s.Z)(j,2),C=w[0],F=w[1],I=(0,u.useState)(8),P=(0,s.Z)(I,1)[0],y=(0,u.useState)(!1),D=(0,s.Z)(y,2),_=D[0],A=D[1],E=(0,u.useState)([]),L=(0,s.Z)(E,2),M=L[0],R=L[1],z=(0,u.useState)(!1),H=(0,s.Z)(z,2),K=H[0],U=H[1],W=(0,u.useState)(""),q=(0,s.Z)(W,2),B=q[0],G=q[1],J=(0,u.useState)(""),N=(0,s.Z)(J,2),O=N[0],Q=N[1],T=(0,u.useState)({min:"",max:""}),V=(0,s.Z)(T,2),X=V[0],Y=V[1],$=(0,u.useState)("ascending"),ee=(0,s.Z)($,2),te=ee[0],ne=ee[1];(0,u.useEffect)((function(){var e=new AbortController,t=function(){var t=(0,c.Z)((0,r.Z)().mark((function t(){var n,c;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,A(!0),t.next=4,f(e);case 4:n=t.sent,o(n),c=(0,a.Z)(new Set(n.map((function(e){return e.make})))),S(c),R(n),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),l.Z.isCancel(t.t0)?console.log("\u0417\u0430\u043f\u0438\u0442 \u0431\u0443\u043b\u043e \u0441\u043a\u0430\u0441\u043e\u0432\u0430\u043d\u043e",t.t0.message):console.error("\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u043f\u0440\u0438 \u0432\u0438\u043a\u043e\u043d\u0430\u043d\u043d\u0456 \u0437\u0430\u043f\u0438\u0442\u0443",t.t0);case 14:return t.prev=14,A(!1),t.finish(14);case 17:case"end":return t.stop()}}),t,null,[[0,11,14,17]])})));return function(){return t.apply(this,arguments)}}();return t(),function(){e.abort()}}),[]);var re=C*P,ae=(0,u.useCallback)((function(e){if(""!==B&&e.make!==B)return!1;var t=parseInt(e.rentalPrice.replace(/\D/g,""),10);return!(""!==O&&t<parseInt(O,10))&&!(""!==X.min&&e.mileage<X.min||""!==X.max&&e.mileage>X.max)}),[B,O,X]);(0,u.useEffect)((function(){if(K){var e=n.filter(ae);R(e),U(!1)}}),[K,n,ae]);var ce=(0,a.Z)(M).sort((function(e,t){return"ascending"===te?parseInt(e.rentalPrice.replace(/\D/g,""),10)-parseInt(t.rentalPrice.replace(/\D/g,""),10):parseInt(t.rentalPrice.replace(/\D/g,""),10)-parseInt(e.rentalPrice.replace(/\D/g,""),10)})).slice(0,re);return(0,h.jsxs)("section",{children:[_&&(0,h.jsx)(d.Z,{}),(0,h.jsxs)(Z.W2,{children:[(0,h.jsx)(g.Z,{makeFilter:B,priceFilter:O,mileageFilter:X,setMakeFilter:G,setPriceFilter:Q,setMileageFilter:Y,makes:b,handleReset:function(){G(""),Q(0),Y({min:"",max:""}),U(!0)},onApplyFilters:function(){U(!0)},children:(0,h.jsx)(p.Kz,{type:"button","aria-label":"sorting-button",onClick:function(){ne((function(e){return"ascending"===e?"descending":"ascending"}))},children:"ascending"===te?(0,h.jsx)(m.r,{}):(0,h.jsx)(x.r,{})})}),(0,h.jsx)(p.Hg,{children:ce.map((function(e){return(0,h.jsx)("li",{children:(0,h.jsx)(i.Z,{car:e})},e.id)}))}),M.length>re&&(0,h.jsx)(p.CF,{type:"button",onClick:function(){return F((function(e){return e+1}))},children:"Load more"})]})]})}}}]);
//# sourceMappingURL=770.5c9e06e3.chunk.js.map