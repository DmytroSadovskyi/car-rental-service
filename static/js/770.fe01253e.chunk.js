"use strict";(self.webpackChunkcar_rental_service=self.webpackChunkcar_rental_service||[]).push([[770],{8770:function(e,r,t){t.r(r),t.d(r,{default:function(){return b}});var n=t(4165),a=t(3433),s=t(5861),c=t(9439),i=t(2227),u=t(2791),l=t(1243);l.Z.defaults.baseURL="https://645a8c7c65bd868e931e4c89.mockapi.io";var o=function(){var e=(0,s.Z)((0,n.Z)().mark((function e(r){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.Z.get("/cars",{signal:r.signal});case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),f=o,p=t(458),g=t(411),Z=t(1751),d=t(117),x=t(5802),h=t(3500),m=t(4501),v=t(5218),k=t(9230),j=t(184),b=function(){var e=(0,k.$G)().t,r=(0,u.useState)([]),t=(0,c.Z)(r,2),o=t[0],b=t[1],S=(0,u.useState)([]),F=(0,c.Z)(S,2),w=F[0],C=F[1],P=(0,u.useState)(1),I=(0,c.Z)(P,2),y=I[0],D=I[1],M=(0,u.useState)(8),_=(0,c.Z)(M,1)[0],A=(0,u.useState)(!1),E=(0,c.Z)(A,2),R=E[0],z=E[1],G=(0,u.useState)([]),H=(0,c.Z)(G,2),K=H[0],L=H[1],U=(0,u.useState)(!1),$=(0,c.Z)(U,2),q=$[0],B=$[1],J=(0,u.useState)(""),N=(0,c.Z)(J,2),O=N[0],Q=N[1],T=(0,u.useState)(""),V=(0,c.Z)(T,2),W=V[0],X=V[1],Y=(0,u.useState)(!1),ee=(0,c.Z)(Y,2),re=ee[0],te=ee[1],ne=(0,u.useState)({min:"",max:""}),ae=(0,c.Z)(ne,2),se=ae[0],ce=ae[1],ie=(0,u.useState)("ascending"),ue=(0,c.Z)(ie,2),le=ue[0],oe=ue[1];(0,u.useEffect)((function(){var e=new AbortController,r=function(){var r=(0,s.Z)((0,n.Z)().mark((function r(){var t,s;return(0,n.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,z(!0),r.next=4,f(e);case 4:t=r.sent,b(t),s=(0,a.Z)(new Set(t.map((function(e){return e.make})))),C(s),L(t),r.next=14;break;case 11:r.prev=11,r.t0=r.catch(0),l.Z.isCancel(r.t0)?console.log("\u0417\u0430\u043f\u0438\u0442 \u0431\u0443\u043b\u043e \u0441\u043a\u0430\u0441\u043e\u0432\u0430\u043d\u043e",r.t0.message):console.error("\u041f\u043e\u043c\u0438\u043b\u043a\u0430 \u043f\u0440\u0438 \u0432\u0438\u043a\u043e\u043d\u0430\u043d\u043d\u0456 \u0437\u0430\u043f\u0438\u0442\u0443",r.t0);case 14:return r.prev=14,z(!1),r.finish(14);case 17:case"end":return r.stop()}}),r,null,[[0,11,14,17]])})));return function(){return r.apply(this,arguments)}}();return r(),function(){e.abort()}}),[]);var fe=y*_,pe=(0,u.useCallback)((function(e){if(""!==O&&e.make!==O)return!1;var r=parseInt(e.rentalPrice.replace(/\D/g,""),10);return!(""!==W&&r>parseInt(W,10))&&!(""!==se.min&&e.mileage<se.min||""!==se.max&&e.mileage>se.max)}),[O,W,se]);(0,u.useEffect)((function(){if(q){var r=o.filter(pe);L(r),0===r.length?(te(!0),v.ZP.error(e("errorMessage"))):te(!1),B(!1)}}),[q,o,pe,e]);var ge=(0,a.Z)(K).sort((function(e,r){return"ascending"===le?parseInt(e.rentalPrice.replace(/\D/g,""),10)-parseInt(r.rentalPrice.replace(/\D/g,""),10):parseInt(r.rentalPrice.replace(/\D/g,""),10)-parseInt(e.rentalPrice.replace(/\D/g,""),10)})).slice(0,fe);return(0,j.jsxs)("section",{children:[R&&(0,j.jsx)(Z.Z,{}),(0,j.jsx)(v.x7,{}),(0,j.jsx)(d.Z,{makeFilter:O,priceFilter:W,mileageFilter:se,setMakeFilter:Q,setPriceFilter:X,setMileageFilter:ce,makes:w,handleReset:function(){Q(""),X(""),ce({min:"",max:""}),B(!0),te(!1)},onApplyFilters:function(){B(!0)},children:(0,j.jsx)(p.Kz,{type:"button","aria-label":"sorting-button",onClick:function(){oe((function(e){return"ascending"===e?"descending":"ascending"}))},children:"ascending"===le?(0,j.jsx)(x.r,{}):(0,j.jsx)(h.r,{})})}),(0,j.jsxs)(g.Z,{children:[0===ge.length&&re&&(0,j.jsx)(j.Fragment,{children:(0,j.jsx)(m.x,{children:e("errorMessage")})}),(0,j.jsx)(p.Hg,{children:ge.map((function(e){return(0,j.jsx)("li",{children:(0,j.jsx)(i.Z,{car:e})},e.id)}))}),K.length>fe&&(0,j.jsx)(p.CF,{type:"button",onClick:function(){return D((function(e){return e+1}))},children:e("loadMore")})]})]})}}}]);
//# sourceMappingURL=770.fe01253e.chunk.js.map