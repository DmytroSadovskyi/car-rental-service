{"version":3,"file":"static/js/770.5c9e06e3.chunk.js","mappings":"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","sources":["services/carsApi.js","pages/CatalogPage/CatalogPage.jsx"],"sourcesContent":["import axios from 'axios';\naxios.defaults.baseURL = 'https://645a8c7c65bd868e931e4c89.mockapi.io';\n\nconst fetchCars = async controller => {\n  const response = await axios.get('/cars', {\n    signal: controller.signal,\n  });\n  return response.data;\n};\n\nexport default fetchCars;\n","import CarCard from 'components/CarCard/CarCard';\nimport { useEffect, useState, useCallback } from 'react';\nimport axios from 'axios';\nimport fetchCars from 'services/carsApi';\nimport { CarsList, LoadMoreBtn, SortButton } from './CatalogPage.styled';\nimport { Container } from 'components/SharedLayout/SharedLayout.styled';\nimport FallBackLoader from '../../components/FallBackLoader/FallBackLoader';\nimport Filter from 'components/Filter/Filter';\nimport { ReactComponent as DescendingIcon } from '../../images/icons/sort-amount-desc.svg';\nimport { ReactComponent as AscendingIcon } from '../../images/icons/sort-amount-asc.svg';\n\nconst CatalogPage = () => {\n  const [cars, setCars] = useState([]);\n  const [makes, setMakes] = useState([]);\n  const [currentPage, setCurrentPage] = useState(1);\n  const [carsPerPage] = useState(8);\n  const [isLoading, setIsLoading] = useState(false);\n\n  const [filteredCars, setFilteredCars] = useState([]);\n  const [applyFiltersFlag, setApplyFiltersFlag] = useState(false);\n\n  const [makeFilter, setMakeFilter] = useState('');\n  const [priceFilter, setPriceFilter] = useState('');\n\n  const [mileageFilter, setMileageFilter] = useState({\n    min: '',\n    max: '',\n  });\n\n  const [sortOrder, setSortOrder] = useState('ascending');\n\n  useEffect(() => {\n    const controller = new AbortController();\n    const getAllCars = async () => {\n      try {\n        setIsLoading(true);\n        const result = await fetchCars(controller);\n        setCars(result);\n        const uniqueMakes = [...new Set(result.map(car => car.make))];\n        setMakes(uniqueMakes);\n        setFilteredCars(result);\n      } catch (error) {\n        if (axios.isCancel(error)) {\n          console.log('Запит було скасовано', error.message);\n        } else {\n          console.error('Помилка при виконанні запиту', error);\n        }\n      } finally {\n        setIsLoading(false);\n      }\n    };\n\n    getAllCars();\n\n    return () => {\n      controller.abort();\n    };\n  }, []);\n\n  const indexOfLastCar = currentPage * carsPerPage;\n  const filterCars = useCallback(\n    car => {\n      if (makeFilter !== '' && car.make !== makeFilter) {\n        return false;\n      }\n\n      const rentalPriceNumeric = parseInt(\n        car.rentalPrice.replace(/\\D/g, ''),\n        10\n      );\n\n      if (\n        priceFilter !== '' &&\n        rentalPriceNumeric < parseInt(priceFilter, 10)\n      ) {\n        return false;\n      }\n\n      if (\n        (mileageFilter.min !== '' && car.mileage < mileageFilter.min) ||\n        (mileageFilter.max !== '' && car.mileage > mileageFilter.max)\n      ) {\n        return false;\n      }\n\n      return true;\n    },\n    [makeFilter, priceFilter, mileageFilter]\n  );\n\n  useEffect(() => {\n    if (applyFiltersFlag) {\n      const filteredCars = cars.filter(filterCars);\n      setFilteredCars(filteredCars);\n\n      setApplyFiltersFlag(false);\n    }\n  }, [applyFiltersFlag, cars, filterCars]);\n\n  const sortedCars = [...filteredCars].sort((a, b) => {\n    if (sortOrder === 'ascending') {\n      return (\n        parseInt(a.rentalPrice.replace(/\\D/g, ''), 10) -\n        parseInt(b.rentalPrice.replace(/\\D/g, ''), 10)\n      );\n    } else {\n      return (\n        parseInt(b.rentalPrice.replace(/\\D/g, ''), 10) -\n        parseInt(a.rentalPrice.replace(/\\D/g, ''), 10)\n      );\n    }\n  });\n\n  const currentCars = sortedCars.slice(0, indexOfLastCar);\n\n  const handleLoadMore = () => setCurrentPage(prevPage => prevPage + 1);\n\n  const handleReset = () => {\n    setMakeFilter('');\n    setPriceFilter(0);\n    setMileageFilter({ min: '', max: '' });\n    setApplyFiltersFlag(true);\n  };\n\n  const toggleSortOrder = () => {\n    setSortOrder(prevSortOrder =>\n      prevSortOrder === 'ascending' ? 'descending' : 'ascending'\n    );\n  };\n\n  return (\n    <section>\n      {isLoading && <FallBackLoader />}\n      <Container>\n        <Filter\n          makeFilter={makeFilter}\n          priceFilter={priceFilter}\n          mileageFilter={mileageFilter}\n          setMakeFilter={setMakeFilter}\n          setPriceFilter={setPriceFilter}\n          setMileageFilter={setMileageFilter}\n          makes={makes}\n          handleReset={handleReset}\n          onApplyFilters={() => {\n            setApplyFiltersFlag(true);\n          }}\n        >\n          <SortButton\n            type=\"button\"\n            aria-label=\"sorting-button\"\n            onClick={toggleSortOrder}\n          >\n            {sortOrder === 'ascending' ? <DescendingIcon /> : <AscendingIcon />}\n          </SortButton>\n        </Filter>\n\n        <CarsList>\n          {currentCars.map(car => (\n            <li key={car.id}>{<CarCard car={car} />}</li>\n          ))}\n        </CarsList>\n        {filteredCars.length > indexOfLastCar && (\n          <LoadMoreBtn type=\"button\" onClick={handleLoadMore}>\n            Load more\n          </LoadMoreBtn>\n        )}\n      </Container>\n    </section>\n  );\n};\n\nexport default CatalogPage;\n"],"names":["axios","defaults","baseURL","fetchCars","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","controller","response","wrap","_context","prev","next","get","signal","sent","abrupt","data","stop","_x","apply","arguments","_useState","useState","_useState2","_slicedToArray","cars","setCars","_useState3","_useState4","makes","setMakes","_useState5","_useState6","currentPage","setCurrentPage","_useState7","carsPerPage","_useState9","_useState10","isLoading","setIsLoading","_useState11","_useState12","filteredCars","setFilteredCars","_useState13","_useState14","applyFiltersFlag","setApplyFiltersFlag","_useState15","_useState16","makeFilter","setMakeFilter","_useState17","_useState18","priceFilter","setPriceFilter","_useState19","min","max","_useState20","mileageFilter","setMileageFilter","_useState21","_useState22","sortOrder","setSortOrder","useEffect","AbortController","getAllCars","result","uniqueMakes","_toConsumableArray","Set","map","car","make","t0","isCancel","console","log","message","error","finish","abort","indexOfLastCar","filterCars","useCallback","rentalPriceNumeric","parseInt","rentalPrice","replace","mileage","filter","currentCars","sort","a","b","slice","_jsxs","children","_jsx","FallBackLoader","Container","Filter","handleReset","onApplyFilters","SortButton","type","onClick","prevSortOrder","DescendingIcon","AscendingIcon","CarsList","CarCard","id","length","LoadMoreBtn","prevPage"],"sourceRoot":""}